
<link rel="import" href="./edit-preferences.html">
<link rel="import" href="./edit-profile.html">
<link rel="import" href="./neon-notification.html">

<script>
customElements.define('neon-header', class extends HTMLElement{
  constructor(){
    super();
  
    const template = document.createElement('template');
    template.innerHTML = ` 
      <style>
        header.menu-header {
          background: rgba(0,0,0,.65);
          height: 50px;
          width: 100%;
          transition: 0.3s all;
        }
        .flex-container{
          display: inline-flex;
          flex-wrap:nowrap;
        }
        .flex-box{

        }
        .logo {
          min-width: 80px;
          align-self: center;
          background: #000;
          padding: 8px 10px 10px 7px;
          height: 50px;
          box-sizing: border-box;
        }
        .logo img{
          height: 80px;
        }
        .metric {
          text-align: right;
          flex: 5;
          align-self: center;
          position: relative;
          padding-right: 10px;
        }  
        select.profile:focus{
          outline: none;
        }
        select.profile{
          width: 300px;
          font-size: 0.9em;
          background: rgba(0,0,0,0);
          border: none;
          color: #fff;
          cursor: pointer;
        }
        select.profile option{
          color:#000;
          padding: 10px 0;
        }
        .metric::after {
          content: ' ';
          /*background-image: url('SVG/dropdown.svg');*/
          width: 25px;
          height: 25px;
          position: absolute;
          top: -1px;
          right: -4px;
          background-size: 25px;
        }
        .time {
          text-align: center;
          align-self: center;
          color: #fff;
        }
        .time > span {
          padding: 5px 20px;
          border-left: 2px dashed #fff;
        }
        .notification {
          position:relative;
          width: 35px;
          text-align: center;
          align-self: center;
          height: 31px;
          border-left: 2px dashed #fff;
          padding-left: 10px;
        }
        .notification-count{
          width: 15px;
          height: 15px;
          background: #fa3e3e;
          display: inline-block;
          font-size: 11px;
          border-radius: 24px;
          position: absolute;
          top: 0;
          color:#fff;
        }
        .user-options {
          min-width: 220px;
          text-align: right;
          align-self: center;
          color: #fff;
        }
        .user-name {
          position: relative;
          cursor:pointer;
        }
        .user-name > span{
          padding-right: 55px;
        }
        .user-name .drop-down{
          top: -4px;
          position: absolute;
          right: 15px;
        }
        .user-name .down{
          display:none;
          position: absolute;
          list-style: none;
          text-align: left;
          background: #fff;
          color: #444;
          padding: 0px;
          font-size: 1em;
          margin-top: 0;
          width: 200px;
          right: 10px;
          border-radius: 3px;
          z-index: 2;
          box-shadow: 0px 2px 8px #444;
        }
        
        .user-name .down li a{
          padding:7px 20px;
          color:#006599;
          text-decoration:none;
          display:inline-block;
          width:100%;
          box-sizing: border-box;
        }
        .user-name .down li:last-child a{
          border-top:1px solid #ccc;
        }
        .user-name:hover .down{
          display:block;
        }

        /*partner change model*/
        .change-partner{
          position: fixed;
          top: 40%;
          min-width: 500px;
          padding: 15px;
          font-size: 1.2em;
          background: #fff;
          box-shadow: 1px 1px 19px #0009;
          border-radius: 2px;
          max-width: 90%;
          width: 70%;
          margin: 0 15%;
        }
        .change-partner-background{
          display:none;
          background: #00000085;
          position: fixed;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          z-index:2;
        }
        .action-btn button{
          background-color: #006599;
          color: #FFFFFF;
          padding: 12px 25px;
          font-size: 14px;
          border: none;
          border-radius: 5px;
          cursor:pointer;
        }
        .modal-footer {
          padding: 10px 0 0;
          text-align: right;
        }
        button.changePartnerNo{
          color:#006599;
          background-color:#fff;
        }

        /* chagne password */
        .change-password{
          position: fixed;
          top: 25%;
          min-width: 300px;
          padding: 15px;
          font-size: 1.2em;
          background: #fff;
          box-shadow: 1px 1px 19px #0009;
          border-radius: 2px;
          max-width: 90%;
          width: 350px;
          right: 0;
          left: 0;
          margin-right: auto;
          margin-left: auto;
        }
        .change-password-background{
          display:none;
          background: #00000085;
          position: fixed;
          width: 100%;
          height: 100%;
          top: 0;
          left: 0;
          z-index:2;
        }
        .change-password-background .modal-header{
          margin-bottom: 15px;
        }
        .change-password-background .modal-footer{
          padding:0px;  
        }
        /*input style */
        .form-groub {
          padding-bottom: 10px;
          position: relative;
          height: 50px;
        }
        .form-groub input:focus + label{
          top:-12px;
          font-size:0.8em
        }
        .form-groub input.has-value +label{
          top:-12px;
          font-size:0.8em
        }

        .form-groub input:focus{
          outline:none; 

        }
        .form-groub label{
          position: absolute;
          top: 10px;
          font-size: 0.9em;
          color: #666;
          transition: 0.2s all;
        }
        .form-groub input{
          width: 100%;
          height: 30px;
          border: none;
          border-bottom: 1px solid #7f7f7f;
          font-size: 18px;
          color: #444;
        }
        .err{
          font-size:0.6em;
          color:red;
          position: absolute;
        }
        button.changePasswordNo{
          background: #fff;
          color: #666;
        }
        .down .drop-icon{
          vertical-align: top;
          display: inline-block;
          padding-right: 5px;
          width: 20px;
        }
        .notification svg{
          cursor:pointer;
        }
        .notification-modal{
          width: 300px;
          background: #fff;
          position: absolute;
          right: -8px;
          top: 30px;
          z-index:4;
          display:none;
        }
        .notification:hover .notification-modal{
          display:block;
        }
        .notifications{
          overflow: hidden;
          padding-bottom: 10px;
          border-bottom: 1px solid #ccc;
          margin-top: 10px;
        }
        .notification-desc{
          text-align: left;
          font-size: 13px;
          line-height: 20px;
          padding: 0 15px;
        }
        .notifcation-time{
          color: black;
          font-size: 11px;
          float: left;
          margin-top: 10px;
          padding-left: 15px;
        }
        .notifcation-detail button{
          padding: 0.4em 0.77em;
          font-family: 'Open Sans', sans-serif;
          background-color: #006599;
          border: none;
          color: #fff;
          font-weight: bold;
          float: right;
          border-radius: 3px;
          cursor: pointer;
          margin-right: 15px;
        }
        .notification-footer{
          margin-top: 7px;
        }
        .notification-all p{
          text-align: right;
          color: #006599;
          padding: 7px;
          margin: 0;
          font-size: 13px;
          cursor: pointer;
        }
        .bold{
          font-weight:bold;
        }
        .close{
          position: absolute;
          top: 20px;
          right: 20px;
          cursor:pointer;
        }
        .close svg{
          width: 25px !important;
          height: 25px !important;
        }
        @media screen and (max-width: 1000px) {
          select.profile{
            width:auto;
            font-size:0.9em;
          }
         
        }
        @media screen and (min-width: 1367px) {
          header.menu-header {
            height: 60px;
          } 
          .logo {
            min-width: 105px;
            align-self: center;
            background: #000;
            padding: 9px 10px 10px 7px;
            height: 60px;
            box-sizing: border-box;
          }       
        }
      </style>
      <neon-notification show></neon-notification>
      <div id="neon-header">
        <header class="menu-header flex-container">
            <div class="logo">
              <a href="/index.html">

              <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 51.8 26.5" style="enable-background:new 0 0 51.8 26.5;" xml:space="preserve"><style type="text/css">.st0{fill:#1D2132;}.st1dk{fill:url(#SVGID_1_);}.st2{opacity:0.25;}.st3{opacity:0.2;fill:#688EC4;stroke:#FFFFFF;stroke-miterlimit:10;}.st4{opacity:0.1;fill:#688EC4;stroke:#FFFFFF;stroke-miterlimit:10;}.st5{opacity:5.000000e-02;fill:#688EC4;stroke:#FFFFFF;stroke-miterlimit:10;}.st6{opacity:5.000000e-02;fill:none;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}.st7{opacity:5.000000e-02;fill:#688EC4;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}.st8{opacity:0.15;fill:#688EC4;stroke:#FFFFFF;stroke-miterlimit:10;}.st9{opacity:0.25;fill:#688EC4;stroke:#FFFFFF;stroke-miterlimit:10;}.st10{opacity:0.1;fill:none;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}.st11{opacity:0.1;fill:#688EC4;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}.st12{fill:#FFFFFF;}.st13{fill:none;stroke:#606060;stroke-miterlimit:10;}.st14{opacity:0.5;fill:#CECECE;}.st15{fill:#F68E28;}.st16{fill:none;}.st17{enable-background:new;}.st18{fill:#606060;}.st19{fill:url(#SVGID_6_);}.st20{opacity:5.000000e-02;}.st21{opacity:3.000000e-02;fill:#688EC4;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}.st22{opacity:3.000000e-02;fill:none;stroke:#FFFFFF;stroke-width:2;stroke-miterlimit:10;}.st23{fill:#4D4D4D;}.st24{fill:#F2653E;}.st25{fill:none;stroke:#FFFFFF;stroke-miterlimit:10;}.st26{fill:none;stroke:#FFFFFF;stroke-miterlimit:10;stroke-dasharray:3,3;}.st27{fill:#EF3A39;}.st28{fill:#4A78BB;}.st29{fill:url(#SVGID_7_);}.st30{fill:url(#SVGID_8_);}.st31{fill:url(#SVGID_9_);}.st32{fill:url(#SVGID_10_);}.st33{fill:url(#SVGID_11_);}.st34{fill:url(#SVGID_12_);}.st35{fill:url(#SVGID_13_);}.st36{fill:url(#SVGID_14_);}</style><g><polygon class="st28" points="27.1,9.5 24.7,9.5 25.3,6.7 27.7,6.7"/><polygon class="st28" points="30.3,9.5 27.9,9.5 28.5,6.7 30.9,6.7"/><polygon class="st28" points="33.5,9.5 31.1,9.5 31.7,6.7 34.1,6.7"/><polygon class="st28" points="36.7,9.5 34.3,9.5 35,6.7 37.4,6.7"/><polygon class="st28" points="41.5,9.5 39.1,9.5 39.8,6.7 42.1,6.7"/><polygon class="st28" points="44.7,9.5 42.4,9.5 43,6.7 45.4,6.7"/><polygon class="st28" points="47.9,9.5 45.6,9.5 46.2,6.7 48.6,6.7"/><polygon class="st28" points="51.1,9.5 48.8,9.5 49.4,6.7 51.8,6.7"/><polygon class="st28" points="47.1,13 44.7,13 45.4,10.3 47.8,10.3"/><polygon class="st28" points="38.3,13 35.9,13 36.6,10.3 38.9,10.3"/><polygon class="st28" points="35.1,16.5 32.7,16.5 33.4,13.8 35.8,13.8"/><polygon class="st28" points="29.5,13 27.1,13 27.7,10.3 30.1,10.3"/><polygon class="st28" points="28.7,16.5 26.3,16.5 26.9,13.8 29.3,13.8"/><polygon class="st28" points="39.9,16.5 37.5,16.5 38.2,13.7 40.5,13.7"/><polygon class="st28" points="46.3,16.5 44,16.5 44.6,13.8 47,13.8"/><g><g><g><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="5.854" y1="18.6332" x2="5.2039" y2="1.720714e-02"><stop  offset="0" style="stop-color:#F08A21"/><stop  offset="1" style="stop-color:#FCB633"/></linearGradient><path class="st1dk" d="M0.1,18.7l2.5,0L4.9,8.6h2.9l0.6-1.9l-3,0l0.8-3.7c0,0,0.2-1.1,1-1.1H11c0,0,0.2-2-0.8-2L5.7,0c0,0-1.1,0-1.5,1.8L3,6.8c0,0-0.8,0-1.5,0C0.9,6.8-0.2,8.7,0,8.7c0.3,0,2.5,0,2.5,0L0.1,18.7z" /></g><g><linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="12.0249" y1="16.673" x2="11.4481" y2="0.1548"><stop  offset="0" style="stop-color:#F08A21"/><stop  offset="1" style="stop-color:#FCB633"/></linearGradient><path style="fill:url(#SVGID_3_);" d="M12.2,0.1h2.6l-3.6,13.6c0,0-0.2,1,0.9,1l-0.8,2c-0.5,0-1.4,0-2,0c-0.4,0-1-0.5-0.8-1.7L12.2,0.1z"/></g><g><linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="15.8995" y1="16.7936" x2="15.5469" y2="6.6954"><stop  offset="0" style="stop-color:#F08A21"/><stop  offset="1" style="stop-color:#FCB633"/></linearGradient><path style="fill:url(#SVGID_5_);" d="M14.9,6.7h2.4l-1.8,6.7c0,0-0.3,1.3,0.3,1.3l3.1,0c0,0,0.4,1.1-0.8,2.1c0,0-3.3,0-4.3,0c-0.6,0-1-0.9-0.8-2L14.9,6.7z"/></g><g><linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="17.5684" y1="26.5085" x2="16.8836" y2="6.8963"><stop  offset="0" style="stop-color:#F08A21"/><stop  offset="1" style="stop-color:#FCB633"/></linearGradient><path class="st19" d="M17.3,23.5l4.3-16.8h2.2l-4.4,17.9c0,0-0.3,1.9-1.6,1.9c0,0-6.4,0-6.4,0c-0.4,0-1.1-0.9-0.4-1.9c0,0,5.1,0,5.4,0C17.1,24.6,17.3,23.5,17.3,23.5z"/></g></g></g></g></svg>


              </a>
            </div>
            <div class="metric flex-box">
              <select class="profile">
                <option>System Global</option>
                <option>System Global</option>
                <option>System Global</option>
              </select>
            </div>
            <div class="time flex-box"><span>12.27 pm<span></div>
            
            <div class="notification flex-box">

                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><style type="text/css">.st0{fill:#657D89;}.st1{fill:#EF3A39;}.st2{fill:#1F2328;}.st3{fill:#C9C9C9;}.st4{fill:#010101;}.st5{fill:#59BA47;}.st6{fill:#F16464;}.st7{fill:#086699;}.st8{enable-background:new;}.st9{fill:#C9C9C9;enable-background:new;}.st10{fill:#62C195;}.st11{opacity:0;fill:#FFFFFF;}.st12{display:none;}.st13{display:inline;opacity:0.32;fill:#F05023;}</style><path class="st1" d="M4.89,17.67v-0.71h1.07v-6.67C5.95,6.82,8.67,4,12,4s6.05,2.82,6.05,6.29v6.67h1.07v0.71H4.89z M17.33,10.29c0-3.08-2.39-5.58-5.33-5.58s-5.33,2.5-5.33,5.58v6.67h10.67V10.29z M12,20c-0.79,0-1.42-0.66-1.42-1.48h2.84C13.42,19.34,12.79,20,12,20z"/><g>  <rect class="st11" width="24" height="24"/></g><g class="st12"><rect x="4" y="4" class="st13" width="16" height="16"/></g></svg>

                <span class="notification-count">0</span>
                <div class="notification-modal">
                  <div class="notification-container">
                    No notifications.
                  </div>
                  <div class="notification-all" style="display:none">
                      <p>View All <span class="note-count">0</span> Notifications</p>
                  </div>
                </div>  
            </div>
            
            <div class="user-options flex-box">
              <div class="user-name">
                <span class="user-drop"><span class="usrname">Naveen1 </span>
                  <span class="drop-down">

                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;width: 25px;" xml:space="preserve"><style type="text/css">.st0{fill:#657D89;}.st1{fill:#EF3A39;}.st2{fill:#1F2328;}.st3{fill:#C9C9C9;}.st4{fill:#010101;}.st5{fill:#59BA47;}.st6{fill:#F16464;}.st7{fill:#086699;}.st8{enable-background:new;}.st9{fill:#C9C9C9;enable-background:new;}.st10{fill:#62C195;}.st11{opacity:0;fill:#FFFFFF;}.st12{display:none;}.st13{display:inline;opacity:0.32;fill:#F05023;}</style><path class="st3" d="M18,8.75l-6,6.5l-6-6.5l1.51,0l4.49,0l4.49,0L18,8.75z"/><g><rect x="0" y="0" class="st11" width="24" height="24"/><rect x="0" y="0" class="st11" width="24" height="24"/><rect y="0" class="st11" width="24" height="24"/></g><g class="st12"><rect x="4" y="4" class="st13" width="16" height="16"/></g></svg>
                  </span>
                </span>
                <ul class="down">
                  <li>
                    <a href="#" class="changePasswordModal">
                      <span class="drop-icon"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope iron-icon" style="fill: #006599;pointer-events: none; display: block; width: 100%; height: 100%;"><g class="style-scope iron-icon"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z" class="style-scope iron-icon"></path></g></svg></span>
                      <span class="link">Change Password</link>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="editProfile">
                      <span class="drop-icon"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope iron-icon" style="fill: #006599;pointer-events: none; display: block; width: 100%; height: 100%;"><g class="style-scope iron-icon"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" class="style-scope iron-icon"></path></g></svg></span>
                      <span class="link">Edit Profile</link>
                    </a>
                  </li><li>
                    <a href="#" class="editPreferences">
                      <span class="drop-icon"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope iron-icon" style="fill: #006599;pointer-events: none; display: block; width: 100%; height: 100%;"><g class="style-scope iron-icon"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" class="style-scope iron-icon"></path></g></svg></span>
                      <span class="link">Preferences</link>
                    </a>
                  </li>
                  <li>
                    <a href="#" class="logout">
                      <span class="drop-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 330 330" style="fill: #006599;enable-background:new 0 0 330 330;" xml:space="preserve" class=""><g><g id="XMLID_2_"><path id="XMLID_4_" d="M51.213,180h173.785c8.284,0,15-6.716,15-15s-6.716-15-15-15H51.213l19.394-19.393   c5.858-5.857,5.858-15.355,0-21.213c-5.856-5.858-15.354-5.858-21.213,0L4.397,154.391c-0.348,0.347-0.676,0.71-0.988,1.09   c-0.076,0.093-0.141,0.193-0.215,0.288c-0.229,0.291-0.454,0.583-0.66,0.891c-0.06,0.09-0.109,0.185-0.168,0.276   c-0.206,0.322-0.408,0.647-0.59,0.986c-0.035,0.067-0.064,0.138-0.099,0.205c-0.189,0.367-0.371,0.739-0.53,1.123   c-0.02,0.047-0.034,0.097-0.053,0.145c-0.163,0.404-0.314,0.813-0.442,1.234c-0.017,0.053-0.026,0.108-0.041,0.162   c-0.121,0.413-0.232,0.83-0.317,1.257c-0.025,0.127-0.036,0.258-0.059,0.386c-0.062,0.354-0.124,0.708-0.159,1.069   C0.025,163.998,0,164.498,0,165s0.025,1.002,0.076,1.498c0.035,0.366,0.099,0.723,0.16,1.08c0.022,0.124,0.033,0.251,0.058,0.374   c0.086,0.431,0.196,0.852,0.318,1.269c0.015,0.049,0.024,0.101,0.039,0.15c0.129,0.423,0.28,0.836,0.445,1.244   c0.018,0.044,0.031,0.091,0.05,0.135c0.16,0.387,0.343,0.761,0.534,1.13c0.033,0.065,0.061,0.133,0.095,0.198   c0.184,0.341,0.387,0.669,0.596,0.994c0.056,0.088,0.104,0.181,0.162,0.267c0.207,0.309,0.434,0.603,0.662,0.895   c0.073,0.094,0.138,0.193,0.213,0.285c0.313,0.379,0.641,0.743,0.988,1.09l44.997,44.997C52.322,223.536,56.161,225,60,225   s7.678-1.464,10.606-4.394c5.858-5.858,5.858-15.355,0-21.213L51.213,180z" data-original="#000000" class="active-path" data-old_color="#0089FF"/> <path id="XMLID_5_" d="M207.299,42.299c-40.944,0-79.038,20.312-101.903,54.333c-4.62,6.875-2.792,16.195,4.083,20.816   c6.876,4.62,16.195,2.794,20.817-4.083c17.281-25.715,46.067-41.067,77.003-41.067C258.414,72.299,300,113.884,300,165   s-41.586,92.701-92.701,92.701c-30.845,0-59.584-15.283-76.878-40.881c-4.639-6.865-13.961-8.669-20.827-4.032   c-6.864,4.638-8.67,13.962-4.032,20.826c22.881,33.868,60.913,54.087,101.737,54.087C274.956,287.701,330,232.658,330,165   S274.956,42.299,207.299,42.299z" data-original="#000000" class="active-path" data-old_color="#0089FF"/></g></g></svg></span>
                      <span class="link">Logout</link>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
        </header>
        <div class="change-partner-background">
          <div class="change-partner">
            <div class="modal-header">The system will reset your password and send the new password to the registered email ID. Do you want to continue?</div>
            <div class="modal-footer">
              <div class="action-btn">
                <button class="changePartnerNo">No</button>
                <button class="changePartnerYes">Yes</button>
              </div>
            </div>
          </div>
        </div>
        <div class="change-password-background">
          <div class="change-password">
            <div class="modal-header">
              <strong>Change Password <span class="close jsclose"><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope iron-icon" style="pointer-events: none; display: block; width: 100%; height: 100%;"><g class="style-scope iron-icon"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" class="style-scope iron-icon"></path></g></svg></span></strong>
              <hr>
            </div>
            <div class="modal-content">
              <div class="form-groub">
                <input type="text" id="password"  >
                <label for="password">Password</label>
                <span class="err password" style="display:none">Invalid password</span>
              </div>
              <div class="form-groub">
                <input type="text" id="newpassword"  >
                <label for="newpassword">New Nassword</label>
                <span class="err newpassword" style="display:none">Invalid password</span>
              </div> 
              <div class="form-groub">
                <input type="text" id="confirmpassword"  >
                <label for="confirmpassword">Confirm Password</label>
                <span class="err confirmpassword" style="display:none">Invalid password</span>
              </div>  
            </div>
            <div class="modal-footer">
              <div class="action-btn">
                <button class="changePasswordNo">Cancel</button>
                <button class="changePasswordYes">Change</button>
              </div>
            </div>
          </div>
        </div>
        <div class="show-notification">
        </div>

      </div>
    `;
    this.attachShadow({mode: 'open'});
    this.shadowRoot.appendChild(template.content.cloneNode(true));

     this.shadowRoot.querySelectorAll('.form-groub input').forEach(input=>{
      input.addEventListener('input',e=>{ (e.target.value.length > 0) ? e.target.classList.add('has-value') :e.target.classList.remove('has-value');
        this.checkValidation();
      });
    });

    this.shadowRoot.querySelector('.jsclose').addEventListener('click', (e) => {
      this.shadowRoot.querySelector('.change-password-background').style.display="none";
    });

    this.shadowRoot.querySelector('.changePasswordNo').addEventListener('click',(e)=>{ 
      this.shadowRoot.querySelector('.change-password-background').style.display="none";
    });

    
  }

  connectedCallback(){
    // if(!sessionStorage.getItem('login_response')) location.href="/index.html";
    if( location.pathname.indexOf('launch.html') ) this.shadowRoot.querySelector('.logo a').href="#";

    this.data=JSON.parse(sessionStorage.getItem('login_response'));
    this.url=location.origin;

    this.setTime();
    this.setUserName();
    this.setPartners();
    setInterval(()=>{this.getNotifications();}, 60000);
    this.getNotifications();
    this.getIl10();

    this.shadowRoot.querySelector('.profile').addEventListener('change',(e)=>{
      this.shadowRoot.querySelector('.change-partner-background').style.display="block";
    });

    this.shadowRoot.querySelector('.changePartnerYes').addEventListener('click',()=>{
      this.changePartner(this.url,this.shadowRoot.querySelector('.profile').value);
    });

    this.shadowRoot.querySelector('.changePartnerNo').addEventListener('click',()=>{ 
      this.shadowRoot.querySelector('.change-partner-background').style.display="none";
    });

    this.shadowRoot.querySelector('.changePasswordModal').addEventListener('click',()=>{ 
      this.shadowRoot.querySelector('.change-password-background').style.display="block";
    });

    this.shadowRoot.querySelector('.changePasswordYes').addEventListener('click',(e)=>{ 
      this.changePasswordCall(this.url+"/neon-ws/changePassword");
    });

    this.shadowRoot.querySelector('.editProfile').addEventListener('click',(e)=>{ 
      let ep=document.createElement('edit-profile');
      ep.setAttribute('show', "");
      document.body.appendChild(ep);
    });

    this.shadowRoot.querySelector('.editPreferences').addEventListener('click',(e)=>{ 
      let ep=document.createElement('edit-preferences');
      ep.setAttribute('show', "");
      document.body.appendChild(ep);
    });
   
    this.shadowRoot.querySelector('.logout').addEventListener('click',(e)=>{ 

      this.logout(this.url+'/neon-ws/logout').then(res=>{
        if(sessionStorage.login_response) delete sessionStorage.login_response
        if(this.hasAttribute('login-url') && this.getAttribute('login-url').length > 3){
          location.href=this.getAttribute('login-url');
        }
        location.href="/index.html";
      }).catch(err=>{
        if(sessionStorage.login_response) delete sessionStorage.login_response
        if(this.hasAttribute('login-url') && this.getAttribute('login-url').length > 3){
          location.href=this.getAttribute('login-url');
        }
        location.href="/index.html";
      });
    });

    this.shadowRoot.querySelector('.notification-all p').addEventListener('click',(e)=>{ 
      let note=document.createElement('neon-notification');
      note.setAttribute('show', '');
      document.body.appendChild(note);
    });


  }
  changePasswordCall(url){
    let valid=this.checkValidation();
    if(valid){
      this.changePassword(url,valid).then(res=>{
        this.shadowRoot.querySelector('.change-password-background').style.display="none";
        console.log('password changed');
      }).catch(err=>{
        this.shadowRoot.querySelector('.change-password-background').style.display="none";
        console.log(err);
        console.log('error in password change');
      });
    }
  }
  changePassword(url,valid){
    return new Promise((resolve, reject) => {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', url);
      xhr.setRequestHeader("content-type","application/x-www-form-urlencoded");
      xhr.onload = function () {
        if (this.status >= 200 && this.status < 300) {
          resolve(xhr.response);
        } else { reject({status: this.status,statusText: xhr.statusText}); }
      };
      xhr.onerror = function () { reject({status: this.status,statusText: xhr.statusText}); };
      xhr.send(`userId=${this.data.id}&currentPassword=${valid.password}&newPassword=${valid.newpassword}`);
    });
  }

  checkValidation(){
      let password=this.shadowRoot.querySelector('#password');
      let newpassword=this.shadowRoot.querySelector('#newpassword');
      let confirmpassword=this.shadowRoot.querySelector('#confirmpassword');
      let err=0;

      if(password.value.length < 4 ){
        this.shadowRoot.querySelector('.err.password').style.display="block";
        err++;
      }else{
        this.shadowRoot.querySelector('.err.password').style.display="none";
      }

      if(newpassword.value.length < 4 ){
        this.shadowRoot.querySelector('.err.newpassword').style.display="block";
        err++;
      }else{
        this.shadowRoot.querySelector('.err.newpassword').style.display="none";
      }
      
      if(confirmpassword.value.length < 4 ){
        this.shadowRoot.querySelector('.err.confirmpassword').style.display="block";
        err++;
      }else{
        this.shadowRoot.querySelector('.err.confirmpassword').style.display="none";
      }

      if(err == 0) return {password:password.value,newpassword:newpassword.value};

      return false;
  }
  setUserName(){
    if(this.data){
      this.shadowRoot.querySelector('.usrname').innerText= this.data.firstName+' '+this.data.lastName;
    }else{
      this.shadowRoot.querySelector('.usrname').innerText= 'Admin';
      console.log('unable to get username');
    }
  }

  setTime(){
    if(this.data.preferences.isClockActive){
      let date=new Date();
      let time=((date.getHours() < 12) ? date.getHours() : date.getHours() - 12)+":"+date.getMinutes()+" "+((date.getHours() < 12) ? "AM" : "PM");
      this.shadowRoot.querySelector('.time span').innerText=time;
      this.shadowRoot.querySelector('.time').style.display="block";
    }else{
      this.shadowRoot.querySelector('.time').style.display="none";
    }
  }

  setPartners(){
    this.changePartnerCall( this.url +"/neon-ws/auth/status").then(res=>{
      sessionStorage.setItem('login_response',res);
      this.data=JSON.parse(sessionStorage.login_response);

      let options="";
      for(let p of this.data.sudoPartners){
        let selected="";
        if(p.id === this.data.partnerId) selected="selected";
        options+=`<option ${selected} value="${p.id}">${p.name}</option>`
      }
      this.shadowRoot.querySelector('.profile').innerHTML=options;
    });
  }

  getNotifications(){
    this.callApi(this.url+`/neon-ws/getNotifications?webUserId=${this.data.id}&partnerId=${this.data.partner.id}`).then(res=>{
      res=JSON.parse(res);
      if(res.length > 0){
        this.shadowRoot.querySelector('.notification-count').innerHTML=res.length;
        this.shadowRoot.querySelector('.notification-all').style.display="block";
        this.shadowRoot.querySelector('.note-count').innerHTML=res.length;
      }else{
        this.shadowRoot.querySelector('.notification-count').style.display="none";
      }

      let notes="No Notifications!",i=1;
      for(let note of res){
        if(i < 4){
          notes+=`<div class="notifications"><div class="notification-desc">
              Approval needed for  <span class="bold">${note.campaignName}</span>  under <span class="bold">${note.categoryName}</span>  by  <span class="bold">${note.createdBy}</span>
            </div><div class="notification-footer"><span class="notifcation-time">
              ${this.dateUtils(note.createdTime)} at ${this.getNoteTime(note.createdTime)}</span><span class="notifcation-detail"> <button>Review</button></span></div></div>`;
        }
        i++;
      }

      this.shadowRoot.querySelector('.notification-container').innerHTML=notes;

    });
    // .catch(err=>{console.log('error in fetch notification');});
  }
  getNoteTime(date){
    date=new Date(date);
    return `${date.getHours()} : ${date.getMinutes()} ${date.getHours() > 11 ? 'PM':'AM'}`;

  }
  dateUtils1(date){
    var seconds = Math.floor((new Date() - new Date(date)) / 1000);

    var interval = Math.floor(seconds / 31536000);
    if (interval > 1) {
      return interval + " years ago";
    }

    interval = Math.floor(seconds / 2592000);
    if (interval > 1) {
      return interval + " months ago";
    }

    interval = Math.floor(seconds / 86400);
    if (interval > 1) {
      return interval + " days ago";
    }

    interval = Math.floor(seconds / 3600);
    if (interval > 1) {
      if(Math.floor(interval/24) ==  1 ){
        return "Yesterday ";
      }else if(Math.floor(interval/24) >  1 ){
        return Math.floor(interval/24) + " days ago";
      }
      return interval + " hours ago";
    }

    interval = Math.floor(seconds / 60);
    if (interval > 1) {
      return interval + " minutes go";
    }
    return Math.floor(seconds) + " seconds";
  
  }
  dateUtils(previous){
    previous=new Date(previous);
    let current=new Date();

    var msPerMinute = 60 * 1000;
    var msPerHour = msPerMinute * 60;
    var msPerDay = msPerHour * 24;
    var msPerMonth = msPerDay * 30;
    var msPerYear = msPerDay * 365;

    var elapsed = current - previous;

    if (elapsed < msPerMinute) {
         return Math.round(elapsed/1000) + ' seconds ago';   
    }
    else if (elapsed < msPerHour) {
         return Math.round(elapsed/msPerMinute) + ' minutes ago';   
    }
    else if (elapsed < msPerDay ) {
         return Math.round(elapsed/msPerHour ) + ' hours ago';   
    }
    else if (elapsed < msPerMonth) {
        return Math.round(elapsed/msPerDay) + ' days ago';   
    }
    else if (elapsed < msPerYear) {
        return Math.round(elapsed/msPerMonth) + ' months ago';   
    }
    else {
        return Math.round(elapsed/msPerYear ) + ' years ago';   
    }
  }
  changePartner(url,id){
    this.changePartnerCall(url+"/neon-ws/changePartner?partnerId="+id).then(res=>{
        let changeVal=JSON.parse(res);
        if(changeVal.partnerId== id){
          this.shadowRoot.querySelector('.change-partner-background').style.display="none";
          this.setPartners();
          console.log('chagned partner');
        }else{
          console.log('error in change partner');
        }
    }).catch(err=>{
      this.shadowRoot.querySelector('.change-partner-background').style.display="none";
      console.log('error in change partner');
    });
  }

  changePartnerCall(url){
    return new Promise(function (resolve, reject) {
      var xhr = new XMLHttpRequest();
      xhr.open('GET', url);
      xhr.onload = function () {
        if (this.status >= 200 && this.status < 300) {
          resolve(xhr.response);
        } else { reject({status: this.status,statusText: xhr.statusText}); }
      };
      xhr.onerror = function () { reject({status: this.status,statusText: xhr.statusText}); };
      xhr.send();
    });
  }

  logout(url){
    return new Promise((resolve,reject)=>{
      let xhr=new XMLHttpRequest();
      xhr.open('GET',url);
      xhr.onload = function () {
        if (this.status >= 200 && this.status < 300) {
          resolve(xhr.response);
        } else { reject({status: this.status,statusText: xhr.statusText}); }
      };
      xhr.onerror = function () { reject({status: this.status,statusText: xhr.statusText}); };
      xhr.send();

    });
  }
  getIl10(){
    this.callApi(this.url+"/l10n/data.en.properties").then(res=>{
      sessionStorage.lang=res;
      let lines=res.split("\n");
      let hashCount=0;
      let il10={};
      for(let line of lines){
        line=line.trim();
        if(!line.trim().startsWith('#')){
          il10[line.substring(0,line.indexOf('='))]=line.substring(line.indexOf('=')+1,line.length);
        }else{
          hashCount++;
        }
      }
      sessionStorage.setItem('il10',JSON.stringify(il10));
    });
  }
  callApi(url){
    return new Promise((resolve,reject)=>{
      let xhr=new XMLHttpRequest();
      xhr.open('GET',url);
      xhr.onload = function () {
        if (this.status >= 200 && this.status < 300) {
          resolve(xhr.response);
        } else { reject({status: this.status,statusText: xhr.statusText}); }
      };
      xhr.onerror = function () { reject({status: this.status,statusText: xhr.statusText}); };
      xhr.send();
    });
  }


});

</script>